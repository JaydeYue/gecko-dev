# Links

[Bug](https://bugzilla.mozilla.org/show_bug.cgi?id=1588197)

[PR](https://github.com/mozilla/gecko-dev/pull/499)

[Patch](https://github.com/JaydeYue/gecko-dev/edit/master/docs/autoplay_media.patch)

# Overview

The user reported that the permission policy for autoplay-media is not added.

# Diagnosis

After searching through the codebase, it is found that permissions are set [here](https://searchfox.org/mozilla-central/source/browser/components/enterprisepolicies/Policies.jsm#1090), the permission schemas are declared [here](https://searchfox.org/mozilla-central/source/browser/components/preferences/sitePermissions.js#15), and the permission defaults are set [here](https://searchfox.org/mozilla-central/source/browser/app/profile/firefox.js#401). I emailed my mentor and he thinks I am on the right track.

# Proposed Solution

Since autoplay-media's schema is already declared, another if statement similar to those of camera, microphone, etc. under Permissions in Policies.jsm and another permissions.default statement similiar to those of camera, microphone, etc. under profile/firefox.js should suffice.

# Testing

I haven't had the time to test it yet unfortunately.
